function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire2757,r=t.register;r("brE3Z",function(r,o){e(r.exports,"confirmResetPassword",()=>t("1XYd7").confirmResetPassword),e(r.exports,"confirmSignUp",()=>t("c7Zwg").confirmSignUp),e(r.exports,"getCurrentUser",()=>t("2yfk2").getCurrentUser),e(r.exports,"resendSignUpCode",()=>t("8XrSp").resendSignUpCode),e(r.exports,"resetPassword",()=>t("hPpH6").resetPassword),e(r.exports,"signIn",()=>t("aqcy4").signIn),e(r.exports,"signUp",()=>t("xBcsQ").signUp),e(r.exports,"updateUserAttributes",()=>t("bykg2").updateUserAttributes),t("1XYd7"),t("c7Zwg"),t("2yfk2"),t("8XrSp"),t("hPpH6"),t("aqcy4"),t("xBcsQ"),t("bykg2")}),r("c7Zwg",function(r,o){e(r.exports,"confirmSignUp",()=>A);var n=t("1qbEC"),i=t("bfiP6"),s=t("k2DuP"),a=t("5RCQ5"),l=t("7XpgE"),u=t("ewkqX"),d=t("hXC67"),p=t("aEls4"),c=t("7fUr4"),C=t("kDFKP"),g=t("eAu1N"),U=t("5XcLh"),f=t("epZMx");async function A(e){let{username:t,confirmationCode:r,options:o}=e,A=n.Amplify.getConfig().Auth?.Cognito;(0,i.assertTokenProviderConfig)(A);let{userPoolId:P,userPoolClientId:S,userPoolEndpoint:m}=A,E=o?.clientMetadata;(0,l.assertValidationError)(!!t,u.AuthValidationErrorCode.EmptyConfirmSignUpUsername),(0,l.assertValidationError)(!!r,u.AuthValidationErrorCode.EmptyConfirmSignUpCode);let I=(0,c.getUserContextData)({username:t,userPoolId:P,userPoolClientId:S}),b=(0,C.createConfirmSignUpClient)({endpointResolver:(0,g.createCognitoUserPoolEndpointResolver)({endpointOverride:m})}),{Session:h}=await b({region:(0,d.getRegionFromUserPoolId)(A.userPoolId),userAgentValue:(0,p.getAuthUserAgentValue)(s.AuthAction.ConfirmSignUp)},{Username:t,ConfirmationCode:r,ClientMetadata:E,ForceAliasCreation:o?.forceAliasCreation,ClientId:A.userPoolClientId,UserContextData:I});return new Promise((e,r)=>{try{let r={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},o=U.autoSignInStore.getState();if(!o.active||o.username!==t){e(r),(0,f.resetAutoSignIn)();return}U.autoSignInStore.dispatch({type:"SET_SESSION",value:h});let n=a.HubInternal.listen("auth-internal",({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),n())});a.HubInternal.dispatch("auth-internal",{event:"confirmSignUp",data:r})}catch(e){r(e)}})}}),r("kDFKP",function(r,o){e(r.exports,"createConfirmSignUpClient",()=>u);var n=t("6vbP8"),i=t("luL8F"),s=t("bdRfK"),a=t("2qp1o"),l=t("7OD1Z");let u=e=>(0,n.composeServiceApi)(s.cognitoUserPoolTransferHandler,(0,a.createUserPoolSerializer)("ConfirmSignUp"),(0,l.createUserPoolDeserializer)(),{...i.DEFAULT_SERVICE_CLIENT_API_CONFIG,...e})}),r("8XrSp",function(r,o){e(r.exports,"resendSignUpCode",()=>g);var n=t("1qbEC"),i=t("bfiP6"),s=t("k2DuP"),a=t("7XpgE"),l=t("ewkqX"),u=t("hXC67"),d=t("aEls4"),p=t("7fUr4"),c=t("foJAH"),C=t("eAu1N");async function g(e){let{username:t}=e;(0,a.assertValidationError)(!!t,l.AuthValidationErrorCode.EmptySignUpUsername);let r=n.Amplify.getConfig().Auth?.Cognito;(0,i.assertTokenProviderConfig)(r);let{userPoolClientId:o,userPoolId:g,userPoolEndpoint:U}=r,f=e.options?.clientMetadata,A=(0,p.getUserContextData)({username:t,userPoolId:g,userPoolClientId:o}),P=(0,c.createResendConfirmationCodeClient)({endpointResolver:(0,C.createCognitoUserPoolEndpointResolver)({endpointOverride:U})}),{CodeDeliveryDetails:S}=await P({region:(0,u.getRegionFromUserPoolId)(r.userPoolId),userAgentValue:(0,d.getAuthUserAgentValue)(s.AuthAction.ResendSignUpCode)},{Username:t,ClientMetadata:f,ClientId:r.userPoolClientId,UserContextData:A}),{DeliveryMedium:m,AttributeName:E,Destination:I}={...S};return{destination:I,deliveryMedium:m,attributeName:E||void 0}}}),r("foJAH",function(r,o){e(r.exports,"createResendConfirmationCodeClient",()=>u);var n=t("6vbP8"),i=t("bdRfK"),s=t("2qp1o"),a=t("7OD1Z"),l=t("luL8F");let u=e=>(0,n.composeServiceApi)(i.cognitoUserPoolTransferHandler,(0,s.createUserPoolSerializer)("ResendConfirmationCode"),(0,a.createUserPoolDeserializer)(),{...l.DEFAULT_SERVICE_CLIENT_API_CONFIG,...e})}),r("bykg2",function(r,o){e(r.exports,"updateUserAttributes",()=>g);var n=t("1qbEC"),i=t("kwYKv"),s=t("bfiP6"),a=t("k2DuP"),l=t("kOfpC"),u=t("hXC67"),d=t("ZiWkh"),p=t("aEls4"),c=t("kU6O7"),C=t("eAu1N");let g=async e=>{let{userAttributes:t,options:r}=e,o=n.Amplify.getConfig().Auth?.Cognito,g=r?.clientMetadata;(0,s.assertTokenProviderConfig)(o);let{userPoolEndpoint:U,userPoolId:f}=o,{tokens:A}=await (0,i.fetchAuthSession)({forceRefresh:!1});(0,l.assertAuthTokens)(A);let P=(0,c.createUpdateUserAttributesClient)({endpointResolver:(0,C.createCognitoUserPoolEndpointResolver)({endpointOverride:U})}),{CodeDeliveryDetailsList:S}=await P({region:(0,u.getRegionFromUserPoolId)(f),userAgentValue:(0,p.getAuthUserAgentValue)(a.AuthAction.UpdateUserAttributes)},{AccessToken:A.accessToken.toString(),ClientMetadata:g,UserAttributes:(0,d.toAttributeType)(t)});return{...function(e){let t={};return Object.keys(e)?.forEach(e=>{t[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),t}(t),...function(e){let t={};return e?.forEach(e=>{let{AttributeName:r,DeliveryMedium:o,Destination:n}=e;r&&(t[r]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:r,deliveryMedium:o,destination:n}}})}),t}(S)}}}),r("kwYKv",function(r,o){e(r.exports,"fetchAuthSession",()=>s);var n=t("1qbEC"),i=t("eL2i9");let s=e=>(0,i.fetchAuthSession)(n.Amplify,e)}),r("eL2i9",function(t,r){e(t.exports,"fetchAuthSession",()=>o);let o=(e,t)=>e.Auth.fetchAuthSession(t)}),r("kU6O7",function(r,o){e(r.exports,"createUpdateUserAttributesClient",()=>u);var n=t("6vbP8"),i=t("bdRfK"),s=t("2qp1o"),a=t("7OD1Z"),l=t("luL8F");let u=e=>(0,n.composeServiceApi)(i.cognitoUserPoolTransferHandler,(0,s.createUserPoolSerializer)("UpdateUserAttributes"),(0,a.createUserPoolDeserializer)(),{...l.DEFAULT_SERVICE_CLIENT_API_CONFIG,...e})});
//# sourceMappingURL=auth.f42ca4f5.js.map
